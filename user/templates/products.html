{% load static %}
{% include 'userheader.html' %}
{% include 'usernav.html' %}

<div class="bg-light p-3 rounded-3 shadow-sm mb-4">
  <form method="get" class="row g-3 align-items-center">

    <!-- Search Bar -->
    <div class="col-lg-6 col-md-6">
      <div class="position-relative">
        <input type="text" name="q" class="form-control ps-5 rounded-pill border-0 shadow-sm" 
               placeholder="ðŸ” Search products..." value="{{ query|default:'' }}">
        <i class="fas fa-search position-absolute top-50 start-0 translate-middle-y text-muted ms-3"></i>
      </div>
    </div>

    <!-- Sort Dropdown -->
    <div class="col-lg-4 col-md-4">
      <select name="sort" class="form-select rounded-pill shadow-sm border-0" onchange="this.form.submit()">
        <option value="">âœ¨ Sort By</option>
        <option value="latest" {% if sort == "latest" %}selected{% endif %}>ðŸ“… Latest</option>
        <option value="price_low" {% if sort == "price_low" %}selected{% endif %}>ðŸ’° Price: Low â†’ High</option>
        <option value="price_high" {% if sort == "price_high" %}selected{% endif %}>ðŸ’Ž Price: High â†’ Low</option>
      </select>
    </div>

    <!-- Apply Button -->
    <div class="col-lg-2 col-md-2 d-grid">
      <button type="submit" class="btn btn-dark rounded-pill shadow-sm">
        <i class="fas fa-filter"></i> Apply
      </button>
    </div>
  </form>
</div>






<div class="row g-4">
  {% for product in products %}
  <div class="col-md-4 col-lg-3">
    <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden product-card">
      
      <!-- Product Image -->
      <div class="position-relative">
        <img src="{{ product.picon.url }}" class="card-img-top" alt="{{ product.title }}">
        <span class="badge bg-dark position-absolute top-0 end-0 m-2 shadow">New</span>
      </div>

      <!-- Product Body -->
      <div class="card-body text-center">
        <h6 class="card-title fw-bold text-dark mb-1">{{ product.title|truncatechars:25 }}</h6>
        <p class="text-muted small mb-2">{{ product.categoryname }} â†’ {{ product.subcatname }}</p>
        <p class="fw-semibold text-primary fs-5 mb-3">â‚¹{{ product.baseprice }}</p>
        
        <!-- Action Buttons -->
        <div class="d-flex justify-content-center gap-2">
          <a href="{% url 'product_detail' product.pid %}" class="btn btn-outline-dark btn-sm rounded-pill px-3">
            <i class="fas fa-eye"></i> View
          </a>
          <button class="btn btn-primary btn-sm rounded-pill px-3">
            <i class="fas fa-gavel"></i> Bid Now
          </button>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <p class="text-center text-muted">No products found.</p>
  {% endfor %}
</div>


<style>
.product-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.product-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}
.product-card img {
  transition: transform 0.4s ease;
}
.product-card:hover img {
  transform: scale(1.05);
}
</style>

{% include 'userfooter.html' %}

